(function(){var p,h,d,i,q,k,l,g,c,j,e,m,n,o;c="undefined"!==typeof exports&&null!==exports?exports:this;h=i=!1;e=d=null;g=utility.clone(metadata.ExpandedSizes);$(document).ready(function(){var a,b,f,e;a=$("canvas").get(0);b=a.getContext("experimental-webgl",{antialias:!0});b.getExtension("OES_texture_float")||glerr("Your browser does not support floating-point textures.");b.getExtension("OES_standard_derivatives")||glerr("Your browser does not support GLSL derivatives.");e=parseInt($("#overlay").css("width"));
f=parseInt($("#overlay").css("height"));d=new c.Display(b,e,f);l();p();return window.requestAnimationFrame(m,a)});c.StartNumeralAnimation=function(){var a,b;if(!h&&!i)return b=0.25*d.transitionMilliseconds,a=(new TWEEN.Tween(g)).to(metadata.CollapsedSizes,b).easing(TWEEN.Easing.Quintic.In).onUpdate(n).onComplete(function(){return h=!1}),b=(new TWEEN.Tween(g)).to(metadata.ExpandedSizes,b).easing(TWEEN.Easing.Quintic.In).onUpdate(n).onComplete(function(){return i=!1}),h=i=!0,a.chain(b),a.start()};m=
function(){var a,b;window.requestAnimationFrame(m,$("canvas").get(0));TWEEN.update();h||(a=d.getCurrentLinkInfo(),$("#crossings").text(a.crossings),$("#subscript").text(a.index),$("#superscript").text(a.numComponents));0===c.pageIndex&&(a=d.gallery.links.length,c.mouse.moved&&(b=d.height/a,b=Math.floor(c.mouse.position.y/b),b>=a&&(b=null),$("#grasshopper").is(":hover")&&(b=-1),d.highlightRow=b),$("#highlight-row").css("visibility","visible"),a=d.highlightRow*d.height/a,$("#highlight-row").css("top",
a));a=d.hotMouse||c.mouse.hot||0===c.pageIndex?"pointer":"";$("#rightpage").css({cursor:a});$("#leftpage").css({cursor:a});d.ready&&d.render();return c.mouse.moved=!1};p=function(){$(window).resize(function(){return l()});$(document).keydown(function(a){38===a.keyCode&&d.moveSelection(0,-1);40===a.keyCode&&d.moveSelection(0,1);37===a.keyCode&&d.moveSelection(-1,0);39===a.keyCode&&d.moveSelection(1,0);32===a.keyCode&&j();if(83===a.keyCode)return q()});$(".arrow").mouseover(function(){$(this).css("color",
"#385fa2");return c.mouse.hot=!0});$(".arrow").mouseout(function(){$(this).css({color:""});return c.mouse.hot=!1});$(".arrow").click(function(){return j()});$("#grasshopper").click(function(a){return a.stopPropagation()});$("#wideband").mousemove(function(a){var b;b=$(this).position();c.mouse.position.x=a.clientX-b.left;c.mouse.position.y=a.clientY-b.top;c.mouse.within=1;return c.mouse.moved=!0});$("#wideband").click(function(a){var b;b=$(this).position();c.mouse.position.x=a.clientX-b.left;c.mouse.position.y=
a.clientY-b.top;c.mouse.within=1;d.click();0===c.pageIndex&&null==e&&null!=d.highlightRow&&(d.changeSelection(d.gallery.i,d.highlightRow),j())});return $("#wideband").mouseout(function(){c.mouse.position.x=-1;c.mouse.position.y=-1;return c.mouse.within=!1})};q=function(){var a;a=$("canvas").get(0);d.render();a=a.toDataURL("image/png");window.open(a,"_blank");return window.focus()};n=function(){$("#crossings").css("font-size",g.crossings);$("#superscript").css("font-size",g.numComponents);return $("#subscript").css("font-size",
g.index)};k=function(a){var b;b=parseInt($("#canvaspage").css("width"));return 1===a?0:b};o=function(){var a;a=parseInt($("#canvaspage").css("width"));parseInt($("#canvaspage").css("height"));$("#leftpage").css("left",-a+c.pan.x);$("#leftpage").css("width",a);$("#rightpage").css("left",0+c.pan.x);return $("#rightpage").css("width",a)};l=function(){var a,b,f;b=parseInt($("#wideband").css("height"));f=768*b/1024;$("#wideband").css("width",f);a=parseInt($("body").css("width"));$("#wideband").css("left",
a/2-f/2);f=parseInt($("#canvaspage").css("width"));null!=e&&e.stop();b=parseInt($("#canvaspage").css("height"));a=$("canvas").get(0);a.clientWidth=f;a.width=a.clientWidth;a.clientHeight=b;a.height=a.clientHeight;d.width=f;d.height=b;c.pan.x=k(c.pageIndex);return o()};j=function(){var a;if(null==e)return c.pageIndex=1-c.pageIndex,a=k(c.pageIndex),e=(new TWEEN.Tween(c.pan)).to({x:a},1E3).easing(TWEEN.Easing.Bounce.Out).onUpdate(o).onComplete(function(){return e=null}),e.start()};c.pageIndex=1;c.pan=
{x:0};c.mouse={position:{x:-1,y:-1},within:!1,hot:!1,moved:!1}}).call(this);
